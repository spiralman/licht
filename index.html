<!DOCTYPE HTML>
<html>

  <head>
    <meta charset="UTF-8">
    <title>elm-reactor and custom html</title>
    <script type="text/javascript" src="elm.js"></script>
  </head>

  <body>
  </body>

  <script type="text/javascript">
   /* Start the Elm app in production mode */
   var app = Elm.Main.fullscreen();

   app.ports.loadImage.subscribe(function(url) {
     var image = new Image();

     image.addEventListener("load", function(e) {
       var canvas = document.createElement('canvas');
       canvas.width = 2048;
       canvas.height = 2048;
       var ctx = canvas.getContext('2d');

       ctx.drawImage(image, 0, 0);
       app.ports.imageLoaded.send(canvas.toDataURL('image/png'));
     });

     image.src = url;
   });
  </script>

</html>
